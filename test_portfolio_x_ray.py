from utils.finalyca_store import get_finalyca_scoped_session
from src.portfolio import process_portfolio_xray_pdf_report

recipeints = ['vijay.shah.1987@gmail.com']

parameters = '<portfolio_parameters><investor_details><name>KRUTI MILAN GANATRA</name><label>KRUTI MILAN GANATRA</label><pan_no>ACKPG8865D</pan_no><accounts><item><account_id>740</account_id><owners><item><PAN>ACKPG8865D</PAN><name>KRUTI MILAN GANATRA</name></item></owners><account_type>demat</account_type><depository>CDSL Demat Account</depository><dp_name>MOTILAL OSWAL FINANCIAL SERVICES LIMITED</dp_name><account_no>1201090005695147</account_no><label>1201090005695147</label><mapped_fund_code/><is_dummy>None</is_dummy></item><item><account_id>741</account_id><owners><item><PAN>ACKPG8865D</PAN><name>KRUTI MILAN GANATRA</name></item></owners><account_type>demat</account_type><depository>NSDL Demat Account</depository><dp_name>KOTAK MAHINDRA BANK LIMITED</dp_name><account_no>IN30317320031945</account_no><label>IN30317320031945</label><mapped_fund_code/><is_dummy>None</is_dummy></item><item><account_id>742</account_id><owners><item><PAN>ACKPG8865D</PAN><name>KRUTI MILAN GANATRA</name></item></owners><account_type>demat</account_type><depository>NSDL Demat Account</depository><dp_name>IIFL SECURITIES LIMITED</dp_name><account_no>IN30226913790085</account_no><label>IN30226913790085</label><mapped_fund_code/><is_dummy>None</is_dummy></item><item><account_id>743</account_id><owners><item><PAN>ACKPG8865D</PAN><name>KRUTI MILAN GANATRA</name></item></owners><account_type>folio</account_type><depository>None</depository><dp_name>None</dp_name><account_no>866648/44</account_no><label>866648/44</label><mapped_fund_code>None</mapped_fund_code><is_dummy>None</is_dummy></item><item><account_id>744</account_id><owners><item><PAN>ACKPG8865D</PAN><name>KRUTI MILAN GANATRA</name></item><item><PAN>AAIPG3492J</PAN><name>MILAN MANHARKANT GANATRA</name></item></owners><account_type>demat</account_type><depository>NSDL Demat Account</depository><dp_name>ICICI BANK LIMITED</dp_name><account_no>IN30134820122835</account_no><label>IN30134820122835</label><mapped_fund_code/><is_dummy>None</is_dummy></item><item><account_id>745</account_id><owners><item><PAN>ACKPG8865D</PAN><name>KRUTI MILAN GANATRA</name></item><item><PAN>AAIPG3492J</PAN><name>MILAN MANHARKANT GANATRA</name></item></owners><account_type>folio</account_type><depository>None</depository><dp_name>None</dp_name><account_no>18905506/0</account_no><label>18905506/0</label><mapped_fund_code>None</mapped_fund_code><is_dummy>None</is_dummy></item><item><account_id>746</account_id><owners><item><PAN>ACKPG8865D</PAN><name>KRUTI MILAN GANATRA</name></item><item><PAN>AAIPG3492J</PAN><name>MILAN MANHARKANT GANATRA</name></item></owners><account_type>folio</account_type><depository>None</depository><dp_name>None</dp_name><account_no>12718503/23</account_no><label>12718503/23</label><mapped_fund_code>None</mapped_fund_code><is_dummy>None</is_dummy></item></accounts><statement_dates><item>2022-03-31 00:00:00</item><item>2022-07-31 00:00:00</item></statement_dates><advisor><id>10201</id><name>Vijay Shah</name><email>Vijay.shah@finalyca.com</email><phone>7900062448</phone><designation>None</designation><city>None</city><state>None</state><org_id>10027</org_id><org_name>Finalyca</org_name><org_logo>logo.png</org_logo></advisor></investor_details><user_id>10201</user_id><plan_id>1495</plan_id><benchmark_id>154</benchmark_id><account_ids><item>744</item><item>742</item><item>741</item><item>740</item><item>743</item><item>745</item><item>746</item></account_ids><fund_info><amc_logo>Images/14.png</amc_logo><product_code>MF</product_code><product_name>Mutual Fund</product_name><plan_name>HDFC Gold ETF</plan_name><plan_code>11395_01</plan_code><classification>Other: ETFs</classification><amc_name>HDFC Mutual Fund</amc_name><benchmark_name>Domestic Price of Physical Gold</benchmark_name></fund_info><portfolio_date>2022-03-31 00:00:00</portfolio_date><portfolio_date_label>31 Mar 2022</portfolio_date_label><from_date>2021-03-31 00:00:00</from_date><from_date_label>31 Mar 2021</from_date_label><to_date>2022-03-31 00:00:00</to_date><to_date_label>31 Mar 2022</to_date_label><report_date>22 Oct 2023</report_date><image_path>https://api.finalyca.com/</image_path><whitelabel_dir>WhiteLabel</whitelabel_dir><generatereport_dir>generated_reports</generatereport_dir><organization_id>10027</organization_id><time_period_type>POP</time_period_type><selection_data><trend_analysis>True</trend_analysis><performance>True</performance><stock_details>True</stock_details><page_break>True</page_break></selection_data></portfolio_parameters>'

db_session = get_finalyca_scoped_session(True)

process_portfolio_xray_pdf_report(db_session, recipeints, parameters)